<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D IoT Dashboard - Clear View</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; overflow:hidden; }
    #info {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.6);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-family: sans-serif;
      z-index: 10;
    }
  </style>
</head>
<body>
  <div id="info">3D Dashboard - Soil Moisture</div>

  <a-scene embedded>
    <!-- กล้องมุมมอง overview -->
    <a-camera position="0 4 6" rotation="-30 0 0" look-controls></a-camera>

    <!-- แสง -->
    <a-entity light="type: ambient; intensity: 0.5"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="2 4 2"></a-entity>

    <!-- พื้น Grid -->
    <a-plane rotation="-90 0 0" width="6" height="6" color="#444" material="side: double" shadow></a-plane>

    <!-- แปลงเกษตร 3D (ใหญ่ขึ้น) -->
    <a-box id="field1" position="-2 0.75 -2" depth="1" width="1" height="1.5" color="#00FF00"></a-box>
    <a-box id="field2" position="0 0.75 -2" depth="1" width="1" height="1.5" color="#00FF00"></a-box>
    <a-box id="field3" position="2 0.75 -2" depth="1" width="1" height="1.5" color="#00FF00"></a-box>

    <!-- ป้ายชื่อ -->
    <a-text id="text1" value="Field 1" position="-2 2.0 -2" align="center" color="#FFFFFF"></a-text>
    <a-text id="text2" value="Field 2" position="0 2.0 -2" align="center" color="#FFFFFF"></a-text>
    <a-text id="text3" value="Field 3" position="2 2.0 -2" align="center" color="#FFFFFF"></a-text>
  </a-scene>

  <script>
    function updateDashboard() {
      // จำลองค่าความชื้นดิน IoT
      let values = [
        Math.floor(Math.random() * 100),
        Math.floor(Math.random() * 100),
        Math.floor(Math.random() * 100)
      ];

      values.forEach((val, i) => {
        let box = document.querySelector(`#field${i+1}`);
        let color = val < 30 ? '#FF4500' : val < 70 ? '#FFFF00' : '#00FF00';
        let height = 1 + val/50; // สูงขึ้นตามค่าความชื้น
        box.setAttribute('height', height);
        box.setAttribute('position', {x: box.object3D.position.x, y: height/2, z: box.object3D.position.z});
        box.setAttribute('color', color);
      });

      document.getElementById('info').innerText = `Field Moisture: ${values.join('% | ')}%`;
    }

    setInterval(updateDashboard, 2000);
  </script>
</body>
</html>
