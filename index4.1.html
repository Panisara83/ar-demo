<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Markerless AR with Camera Toggle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { margin:0; background:#222; display:flex; flex-direction:column; height:100vh; }
    #controls { position:absolute; top:10px; left:10px; z-index:10; }
    button { padding:6px 12px; border:none; border-radius:6px; background:#007bff; color:#fff; margin-right:5px; }
    model-viewer { flex:1; width:100%; height:100%; }
  </style>
</head>
<body>

<div id="controls">
  <button id="toggleCam">Toggle Camera</button>
</div>

<model-viewer id="mv"
              src="./scene.gltf"
              alt="3D model"
              camera-controls
              auto-rotate
              ar>
</model-viewer>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<script>
const mv = document.getElementById('mv');
let arActive = false;

// Toggle AR session (‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á)
document.getElementById('toggleCam').addEventListener('click', async () => {
  if (!arActive) {
    if (mv.canActivateAR) {
      try {
        await mv.activateAR(); // ‡πÄ‡∏õ‡∏¥‡∏î AR ‚Üí ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á
        arActive = true;
        console.log('üì∑ Camera ON (AR active)');
      } catch(err) {
        console.error('‚ùå AR activation failed:', err);
      }
    } else {
      console.warn('AR not available on this device/browser');
    }
  } else {
    try {
      await mv.deactivateAR(); // ‡∏õ‡∏¥‡∏î AR ‚Üí ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏õ‡∏¥‡∏î
      arActive = false;
      console.log('üì∑ Camera OFF (AR deactivated)');
    } catch(err) {
      console.error('‚ùå AR deactivation failed:', err);
    }
  }
});

// Debug
mv.addEventListener('load', () => console.log('‚úÖ Model loaded'));
mv.addEventListener('ar-status', e => console.log('üîπ AR status:', e.detail.status));
mv.addEventListener('error', e => console.error('‚ùå ModelViewer error:', e.detail));
</script>

</body>
</html>


