<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>VR Interaction Example</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>
<body>
  <a-scene background="color: #222">
    
    <!-- Camera + Cursor -->
    <a-entity camera look-controls>
      <a-cursor 
        fuse="true" 
        fuse-timeout="1500" 
        raycaster="objects: .interactable">
      </a-cursor>
    </a-entity>
    
    <!-- วัตถุที่สามารถโต้ตอบได้ -->
    <a-box class="interactable" position="0 1 -3" color="#4CC3D9" depth="1" height="1" width="1"></a-box>
    <a-sphere class="interactable" position="2 1 -4" radius="0.5" color="#EF2D5E"></a-sphere>
    <a-cylinder class="interactable" position="-2 1 -4" radius="0.5" height="1" color="#FFC65D"></a-cylinder>

    <!-- พื้น -->
    <a-plane rotation="-90 0 0" width="10" height="10" color="#7BC8A4"></a-plane>

  </a-scene>

  <script>
    // สร้าง Component ชื่อ "interactable"
    AFRAME.registerComponent('interactable', {
      init: function () {
        const el = this.el;

        // Event เมื่อถูก cursor เล็ง + Fuse / Click
        el.addEventListener('click', function () {
          // สลับสีวัตถุเมื่อถูกเลือก
          const oldColor = el.getAttribute('color');
          const newColor = oldColor === '#FFFF00' ? '#4CC3D9' : '#FFFF00';
          el.setAttribute('color', newColor);

          // แสดงข้อความใน console
          console.log(el.tagName + ' ถูกเลือก! สีเปลี่ยนเป็น ' + newColor);
        });

        // Event mouseenter / cursor enter (highlight effect)
        el.addEventListener('mouseenter', function () {
          el.setAttribute('opacity', 0.7); // ทำให้โปร่งแสงเมื่อเล็ง
        });

        el.addEventListener('mouseleave', function () {
          el.setAttribute('opacity', 1); // คืนค่า opacity เดิม
        });
      }
    });

    // เพิ่ม Component ให้วัตถุทั้งหมดที่มี class "interactable"
    document.querySelectorAll('.interactable').forEach(el => {
      el.setAttribute('interactable', '');
    });
  </script>
</body>
</html>
